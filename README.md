# �� Outpilot

ChatGPT での学びを「残す・整える・発信する」ための AI アウトプット支援ツール＆ポートフォリオサイト。
調べたことを自動で記事やスライドに変換し、Qiita や自ブログに投稿可能。

---

## 🎯 コンセプト

ChatGPT での学びを**自動で記事やスライドに変換**し、**Qiita や自ブログに投稿**できる AI アウトプットパートナー。
学習内容を資産化し、発信までつなげる自分専用のツール。

---

## 🗂️ サイト構成

| パス               | 内容                                                   | 公開範囲              |
| ------------------ | ------------------------------------------------------ | --------------------- |
| `/`                | ポートフォリオ TOP（自己紹介・導線）                   | ✅ 公開               |
| `/articles`        | 投稿記事一覧（Qiita）                                  | ✅ 公開               |
| `/projects`        | 自作プロダクト・制作物一覧                             | ✅ 公開               |
| `/skills`          | タグ別記事数・月別アウトプット可視化                   | ✅ 公開               |
| `/slides`          | スライド一覧ページ                                     | ✅ 公開               |
| `/slides/[slug]`   | 個別スライド表示ページ（Marp 形式）                    | ✅ 公開               |
| `/outpilot/chat`   | ChatGPT 連携チャット UI（記事化/スライド化ボタン付き） | 🔒 非公開（認証必要） |
| `/outpilot/drafts` | 記事下書き一覧・編集・投稿                             | 🔒 非公開（認証必要） |

---

## ✅ 機能要件

### 1. **ChatUI（学習ログ）機能**

#### 1.1 基本チャット機能

- **入力**: ユーザーがメッセージを入力
- **送信**: ChatGPT（gpt-4o）に送信
- **応答**: AI 応答を表示
- **履歴保存**: Prisma でチャット履歴を DB に保存

#### 1.2 スレッド機能（ChatGPT 風）

- **新規スレッド作成**: タイトル入力で新規作成
- **スレッド一覧**: 左サイドバーにスレッド一覧表示
- **スレッド切り替え**: クリックでスレッド切り替え
- **スレッド削除**: 不要なスレッドを削除
- **メッセージ管理**: スレッド内の全メッセージを時系列表示

#### 1.3 記事化・スライド化ボタン

- **表示条件**: 各チャットログに個別ボタン
- **記事化ボタン**: そのログを基に記事生成
- **スライド化ボタン**: そのログを基にスライド生成

#### 1.4 UI/UX

- **レイアウト**: ChatGPT 風の 2 カラムレイアウト
  - 左: スレッド一覧
  - 右: チャット画面
- **レスポンシブ**: モバイル対応
- **リアルタイム**: メッセージ送信中はローディング表示

### 2. **記事生成・投稿機能**

#### 2.1 完全自動記事生成

- **入力**: チャットログ全体または選択範囲
- **分析**: GPT が内容を分析
- **構成**: 自動で目次・構成を生成
- **執筆**: 完全自動で記事を執筆
- **最適化**: SEO 対策、読みやすさを考慮

#### 2.2 生成内容

- **タイトル**: 魅力的なタイトルを自動生成
- **概要**: 記事の概要を自動生成
- **目次**: 論理的な構成の目次
- **本文**: 詳細で分かりやすい本文
- **タグ**: 適切なタグを自動付与

#### 2.3 投稿機能

- **Qiita 投稿**: Qiita API 経由で投稿
  - 下書き保存
  - 公開投稿
  - レート制限対応（1 日 100 件、認証時 1000 回/時間）
- **自ブログ投稿**: Contentlayer + Markdown ファイルで管理

#### 2.4 記事管理

- **下書き一覧**: 作成中の記事一覧
- **公開記事一覧**: 投稿済み記事一覧
- **編集機能**: 既存記事の編集
- **品質向上**: 複数回生成、人間チェック、テンプレート対応

### 3. **スライド生成・表示機能**

#### 3.1 GPT 任せスライド生成

- **入力**: チャットログまたは手動入力
- **生成**: GPT で Marp 形式 Markdown を生成
- **枚数**: GPT が内容に応じて自動決定
- **構成**: 論理的な流れを自動構成
- **デザイン**: Marp テーマを自動選択

#### 3.2 生成内容

- **タイトルスライド**: プレゼンテーションタイトル
- **目次スライド**: スライド構成
- **内容スライド**: 詳細な内容
- **まとめスライド**: 要点のまとめ

#### 3.3 スライド表示

- **一覧表示**: `/slides`でスライド一覧
- **個別表示**: `/slides/[slug]`で個別スライド
- **Marp Viewer**: Web 表示
- **PDF 出力**: 将来的に対応予定
- **カスタマイズ**: テーマ、レイアウト調整

### 4. **スキル可視化機能**

#### 4.1 タグ別可視化

- **棒グラフ**: タグ別アウトプット数
- **円グラフ**: タグ別割合

#### 4.2 月別可視化

- **折れ線グラフ**: 月別アウトプット推移

#### 4.3 データソース

- **記事データ**: Qiita + 自ブログ
- **スライドデータ**: 生成したスライド
- **タグ抽出**: 記事・スライドから自動抽出

### 5. **ポートフォリオサイト機能**

#### 5.1 自己紹介ページ（`/`）

- **基本情報**: 名前、経歴、スキル
- **SNS リンク**: GitHub、Twitter、LinkedIn
- **導線**: 各機能へのナビゲーション

#### 5.2 記事一覧ページ（`/articles`）

- **統合表示**: Qiita + 自ブログ記事
- **フィルタリング**: タグ、日付、プラットフォーム
- **検索機能**: タイトル・内容検索

#### 5.3 プロジェクト一覧ページ（`/projects`）

- **制作物紹介**: 自作プロダクト一覧
- **詳細情報**: 技術スタック、説明、リンク

#### 5.4 スキルページ（`/skills`）

- **グラフ表示**: タグ別・月別アウトプット
- **統計情報**: 総記事数、総スライド数

### 6. **認証・認可機能**

#### 6.1 認証

- **NextAuth.js**: GitHub / Google 認証
- **セッション管理**: JWT トークン

#### 6.2 認可制御

- **公開ページ**: 誰でもアクセス可能

  - `/` (ポートフォリオ TOP)
  - `/articles` (記事一覧)
  - `/projects` (プロジェクト一覧)
  - `/skills` (スキル可視化)
  - `/slides` (スライド一覧)
  - `/slides/[slug]` (個別スライド)

- **非公開ページ**: 認証済みユーザーのみ
  - `/outpilot/chat` (チャット UI)
  - `/outpilot/drafts` (記事下書き)

#### 6.3 セキュリティ

- **CSRF 対策**: NextAuth.js の CSRF 保護
- **XSS 対策**: 入力値のサニタイズ
- **SQL インジェクション対策**: Prisma のパラメータ化クエリ

---

## 🧑‍💻 技術スタック

| 領域           | 技術                                                 |
| -------------- | ---------------------------------------------------- |
| フロントエンド | Next.js（App Router）+ Tailwind CSS                  |
| 状態管理       | Zustand or Context API                               |
| バックエンド   | NestJS（既存）                                       |
| DB / ORM       | PostgreSQL + Prisma                                  |
| 認証           | NextAuth.js (GitHub / Google)                        |
| AI 連携        | OpenAI API（gpt-4o）                                 |
| 投稿連携       | Qiita API（v2）、自ブログ（Contentlayer + Markdown） |
| スライド表示   | Marp（@marp-team/marp-core）                         |

---

## 💡 ユースケース

| シーン           | できること                                           |
| ---------------- | ---------------------------------------------------- |
| ChatGPT で調べた | チャット履歴保存、あとからボタンで記事化・スライド化 |
| 発信したい       | Qiita や自ブログに投稿                               |
| 発表資料が必要   | GPT が生成したスライドを一覧・個別ページで閲覧可能   |
| 成長を見せたい   | スキルタグ別や月別のアウトプット量をグラフ化         |
| 自己紹介したい   | ポートフォリオで一元管理                             |

---

## 🔚 一言まとめ

outpilot は「学びを自動で整え、資産化し、発信までつなげる」自分専用の AI アウトプットパートナーです。

---

## 📊 **スキル評価システム**

### **評価項目と重み付け**

#### **1. 記事関連（技術発信力）**

| 項目         | 重み            | 説明                     |
| ------------ | --------------- | ------------------------ |
| 投稿数       | 10 点/記事      | Qiita への記事投稿数     |
| 総閲覧数     | 0.01 点/閲覧    | 全記事の総閲覧数         |
| 総スター数   | 5 点/スター     | 全記事の総スター数       |
| 総ストック数 | 3 点/ストック   | 全記事の総ストック数     |
| 平均閲覧数   | 0.1 点/平均閲覧 | 記事あたりの平均閲覧数   |
| 平均スター数 | 2 点/平均スター | 記事あたりの平均スター数 |
| 月間継続性   | 5 点/月         | 月間投稿数の継続性       |
| 最近の活動   | 3 点/活動       | 最近 3 ヶ月の活動度      |

#### **2. プロジェクト関連（実装力）**

| 項目                   | 重み               | 説明                                 |
| ---------------------- | ------------------ | ------------------------------------ |
| プロジェクト数         | 15 点/プロジェクト | GitHub リポジトリ数                  |
| アクティブプロジェクト | 20 点/プロジェクト | 最近コミットがあるリポジトリ         |
| OSS 貢献               | 15 点/貢献         | 他リポジトリへのコントリビューション |
| コード行数             | 0.001 点/行        | 総コード行数（1000 行で 1 点）       |

#### **3. スライド関連（説明力）**

| 項目       | 重み          | 説明               |
| ---------- | ------------- | ------------------ |
| スライド数 | 8 点/スライド | 作成したスライド数 |
| 発表回数   | 12 点/発表    | 実際の発表回数     |

#### **4. 学習関連（継続力）**

| 項目         | 重み      | 説明                |
| ------------ | --------- | ------------------- |
| 学習継続日数 | 0.5 点/日 | GitHub 草の継続日数 |

#### **5. コミュニティ関連（影響力）**

| 項目             | 重み                | 説明                    |
| ---------------- | ------------------- | ----------------------- |
| フォロワー数     | 0.1 点/フォロワー   | SNS フォロワー数        |
| コネクション数   | 0.2 点/コネクション | LinkedIn コネクション数 |
| コードレビュー数 | 5 点/レビュー       | GitHub PR レビュー数    |

### **カテゴリ別スキル研鑽**

#### **カテゴリ分類**

- **フロントエンド**: React, Vue, TypeScript, Next.js, Tailwind CSS
- **バックエンド**: Node.js, Python, Java, NestJS, Prisma
- **インフラ**: AWS, Docker, PostgreSQL, MySQL
- **ツール**: Git, GitHub, Figma, Vercel
- **AI・機械学習**: OpenAI, TensorFlow, PyTorch
- **モバイル**: React Native, Flutter, Swift
- **ゲーム開発**: Unity, Unreal Engine, Three.js

#### **カテゴリ抽出方法**

- **記事**: Qiita タグから自動抽出
- **プロジェクト**: package.json や README から推測
- **スライド**: 内容からキーワード検索
- **統合**: 全活動をカテゴリ別に集計

### **スコア計算例**

#### **例：React スキルの場合**

```typescript
// 記事関連
- 投稿数: 3記事 × 10点 = 30点
- 総閲覧数: 1000閲覧 × 0.01点 = 10点
- 総スター数: 50スター × 5点 = 250点
- 総ストック数: 30ストック × 3点 = 90点

// プロジェクト関連
- プロジェクト数: 2プロジェクト × 15点 = 30点
- アクティブプロジェクト: 1プロジェクト × 20点 = 20点
- コード行数: 5000行 × 0.001点 = 5点

// 合計: 435点 → レベル43（435/1000×100）
```

### **コミットメッセージルール**

#### **技術タグの記録**

```bash
# 使用した技術を[]で囲んで記録
git commit -m "feat: Reactコンポーネント追加 [react] [typescript]"
git commit -m "fix: APIエンドポイント修正 [nestjs] [prisma]"
git commit -m "style: デザイン調整 [tailwindcss]"
```

#### **自動技術検出機能**

```bash
# 通常のコミット（自動で技術タグが検出・追加される）
git commit -m "feat: 新機能追加"
# → 自動で [typescript] [react] [nextjs] が追加される

# 検出結果を確認・編集
git commit --edit
# → エディタが開いて、技術タグを手動で編集可能

# そのままコミット
git commit
# → 検出された技術タグ付きでコミット
```

#### **手動編集の例**

```bash
# 元のコミットメッセージ
feat: 新機能追加

[typescript] [react] [nextjs]

# 編集後（不要なタグを削除、新しいタグを追加）
feat: 新機能追加

[typescript] [react] [nextjs] [framer-motion]
```

#### **標準技術タグ**

- **フロントエンド**: [react], [vue], [typescript], [nextjs], [tailwindcss]
- **バックエンド**: [nodejs], [python], [nestjs], [prisma]
- **インフラ**: [aws], [docker], [postgresql]
- **ツール**: [git], [github], [figma], [vercel]

---

## 🚀 開発フェーズ

### ✅ **フェーズ 1：環境構築（完了）**

- [x] NestJS プロジェクト作成
- [x] Prisma 初期化・接続
- [x] PostgreSQL セットアップ
- [x] OpenAI API 統合

### 🔄 **フェーズ 2：Next.js フロントエンド構築**

- [ ] Next.js プロジェクト作成
- [ ] Tailwind CSS 設定
- [ ] NextAuth.js 認証設定
- [ ] NestJS API との連携

### 📋 **フェーズ 3：チャット機能実装**

- [ ] ChatGPT 風 UI 実装
- [ ] スレッド機能実装
- [ ] メッセージ送受信機能
- [ ] 記事化・スライド化ボタン

### ✍️ **フェーズ 4：記事生成機能**

- [ ] 完全自動記事生成
- [ ] Markdown エディタ
- [ ] Qiita API 連携
- [ ] 自ブログ投稿機能

### 📊 **フェーズ 5：スライド生成機能**

- [ ] Marp 形式スライド生成
- [ ] スライド表示機能
- [ ] スライド一覧ページ

### 📈 **フェーズ 6：ポートフォリオ機能**

- [ ] 自己紹介ページ
- [ ] 記事一覧ページ
- [ ] プロジェクト一覧ページ
- [ ] スキル可視化ページ

### 🧪 **フェーズ 7：テスト・デプロイ**

- [ ] ユニットテスト
- [ ] E2E テスト
- [ ] 本番環境デプロイ
- [ ] パフォーマンス最適化

---

## 📝 API エンドポイント（NestJS）

### スレッド関連

- `POST /threads` - 新しいスレッドを作成
- `GET /threads` - スレッド一覧を取得
- `GET /threads/:id` - 特定のスレッドを取得
- `PATCH /threads/:id` - スレッドを更新
- `DELETE /threads/:id` - スレッドを削除

### メッセージ関連

- `POST /threads/:id/messages` - 新しいメッセージを送信（ChatGPT 応答付き）
- `GET /threads/:id/messages` - スレッドのメッセージ一覧を取得
- `GET /threads/:threadId/messages/:messageId` - 特定のメッセージを取得

### 要約関連

- `POST /threads/:id/summaries` - スレッドの要約を作成
- `GET /threads/:id/summaries` - スレッドの要約一覧を取得
- `PATCH /threads/:threadId/summaries/:summaryId` - 要約を更新

### AI 応答関連

- `POST /threads/:id/ai-response` - AI 応答を生成

---

## 🔑 必要な API キー

### OpenAI API

1. OpenAI Platform にアクセス
2. API キーを生成
3. 環境変数`OPENAI_API_KEY`に設定

### Qiita API

1. Qiita にログイン
2. 個人用アクセストークンを生成
3. 環境変数`QIITA_API_TOKEN`に設定
4. レート制限に注意（認証時 1000 回/時間、1 日 100 件投稿）

### Notion API（将来的に）

1. Notion Developers にアクセス
2. 新しいインテグレーションを作成
3. API キーを取得し、環境変数`NOTION_API_KEY`に設定
4. データベース ID を取得し、環境変数`NOTION_DATABASE_ID`に設定

---

## 🚀 セットアップ

### 1. 依存関係のインストール

```bash
# バックエンド
pnpm install

# フロントエンド（今後作成予定）
cd frontend
pnpm install
```

### 2. 環境変数の設定

`.env`ファイルを作成し、以下の環境変数を設定してください：

```env
# OpenAI API
OPENAI_API_KEY=your_openai_api_key

# Qiita API
QIITA_API_TOKEN=your_qiita_api_token

# Database
DATABASE_URL="postgresql://username:password@localhost:5432/outpilot"

# NextAuth.js（今後追加予定）
NEXTAUTH_SECRET=your_nextauth_secret
GITHUB_ID=your_github_client_id
GITHUB_SECRET=your_github_client_secret
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
```

### 3. データベースのセットアップ

```bash
# Prismaクライアントの生成
npx prisma generate

# データベースのマイグレーション
npx prisma db push
```

### 4. 開発サーバーの起動

```bash
# バックエンド（開発モード）
pnpm run start:dev

# フロントエンド（今後追加予定）
cd frontend
pnpm run dev
```

---

## 📄 ライセンス

MIT License
